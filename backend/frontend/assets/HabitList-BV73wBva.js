import{_ as m,m as u,d as h,c as n,o as d,a as s,e as b,t as i,n as _,f,w as g,g as y,F as k,r as v}from"./index-Dx0mkLL9.js";const x={data(){return{sortBy:"title"}},computed:{...h(["habits"]),filteredHabits(){if(!this.habits)return[];let t=[...this.habits];return this.sortBy==="title"?t.sort((e,o)=>e.title.localeCompare(o.title)):this.sortBy==="date"?t.sort((e,o)=>new Date(o.created_at)-new Date(e.created_at)):this.sortBy==="streak"&&t.sort((e,o)=>o.streak-e.streak),t},completedCount(){return this.habits?this.habits.filter(t=>t.completed_today).length:0},progressPercentage(){return this.habits.length>0?`${this.completedCount/this.habits.length*100}%`:"0%"}},methods:{...u(["updateHabit","deleteHabit"]),toggleComplete(t){if(t.completed_today=!t.completed_today,t.completed_today){t.streak+=1;let e=new Date().toISOString().split("T")[0];t.completed_dates.includes(e)||t.completed_dates.push(e)}else t.streak=0;this.updateHabit(t)},confirmDelete(t){confirm("Are you sure you want to delete this habit?")&&this.deleteHabit(t)},exportCSV(){let t="data:text/csv;charset=utf-8,";t+=`Title,Streak,Completed Dates
`,this.habits.forEach(r=>{t+=`"${r.title}",${r.streak},"${r.completed_dates.join(",")}"
`});let e=encodeURI(t),o=document.createElement("a");o.setAttribute("href",e),o.setAttribute("download","habit_tracker.csv"),document.body.appendChild(o),o.click()}},mounted(){this.$store.dispatch("fetchHabits")}},C={class:"list-container"},S={key:0,class:"progress-container"},w={class:"block text-gray-700 font-semibold"},B={class:"progress-bar"},D={class:"filters flex justify-between items-center mt-4"},H={class:"text-gray-700 font-semibold"},V={class:"habit-list mt-4"},A={class:"habit-info"},T={class:"habit-title font-semibold text-lg"},E={class:"habit-description text-gray-600"},I={class:"habit-streak text-green-600 font-bold"},N={class:"habit-actions flex space-x-2"},P=["onClick"],U=["onClick"];function j(t,e,o,r,c,l){return d(),n("div",C,[e[4]||(e[4]=s("h2",{class:"text-2xl font-bold mb-4"},"ğŸ“‹ Your Habits",-1)),t.habits.length>0?(d(),n("div",S,[s("span",w,"Today's Progress: "+i(l.completedCount)+" / "+i(t.habits.length),1),s("div",B,[s("div",{style:_({width:l.progressPercentage}),class:"progress-fill"},null,4)])])):b("",!0),s("div",D,[s("label",H,[e[3]||(e[3]=f("Sort by: ")),g(s("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>c.sortBy=a),class:"ml-2 p-2 border rounded"},e[2]||(e[2]=[s("option",{value:"title"},"Title",-1),s("option",{value:"date"},"Date Added",-1),s("option",{value:"streak"},"Streak",-1)]),512),[[y,c.sortBy]])]),s("button",{onClick:e[1]||(e[1]=(...a)=>l.exportCSV&&l.exportCSV(...a)),class:"bg-blue-600 hover:bg-blue-800 text-white py-2 px-4 rounded transition-all"},"ğŸ“‚ Export to CSV")]),s("ul",V,[(d(!0),n(k,null,v(l.filteredHabits,a=>(d(),n("li",{key:a.id,class:"habit-item"},[s("div",A,[s("span",T,i(a.title),1),s("span",E,i(a.description),1),s("span",I,"ğŸ”¥ Streak: "+i(a.streak)+" days",1)]),s("div",N,[s("button",{class:"complete-btn",onClick:p=>l.toggleComplete(a)},"âœ…",8,P),s("button",{class:"delete-btn",onClick:p=>l.confirmDelete(a.id)},"ğŸ—‘ï¸",8,U)])]))),128))])])}const L=m(x,[["render",j],["__scopeId","data-v-e0f1e692"]]);export{L as default};
